/**
 * jquery.textareaHighlighter
 * This plugin allow you to select text in textarea with custom color and keep this selection until text is changed.
 * See the readme at [git](https://github.com/pahomovda/jquery.textareaHighlighter).
 *
 * Copyright (c) 2014 Pahomov Dmitry
 * Released under the MIT license
 * https://github.com/pahomovda/jquery.textareaHighlighter/blob/master/LICENSE
 */
(function(e){var t="textareaHighlighter";var n=t+"data";var r="."+t+"_evt";e.fn[t]=function(i){var s=arguments;$this=e(this);var o=$this.data(n);var u={init:function(i){var s=e.extend({fontsize:14,cols:65,rows:3},i);o={_helperel:null,_textareael:null,_fontsize:s.fontsize,_linesize:s.fontsize+2,_ishelperhidden:false};var a=this.val()||"";var f=this.attr("id")||t+Math.random().toString(36).substr(2,5);var l=this.css("backgroundColor")||"yellow";var c="normal "+o._fontsize+"px/"+o._linesize+'px "Courier New",Courier,monospace';var h={margin:"0",padding:"0",position:"relative",border:"1px solid #999999",outline:"none",overflow:"scroll",width:"100%",background:"transparent",resize:"none",font:c};var p={position:"absolute",background:l,"white-space":"pre",border:"1px solid transparent",color:"transparent",font:c,overflow:"scroll"};o._textareael=e('<textarea cols="'+s.cols+'" rows="'+s.rows+'" wrap="off">'+a+"</textarea>").attr("id",f).bind("keyup"+r,u._textareaonchange).bind("paste"+r,function(e){setTimeout(function(){u._textareaonchange(e)},1)});this.replaceWith(o._textareael);o._textareael.resizable({resize:u._textarearesize}).bind("scroll"+r,u._textareascroll).css(h);o._helperel=e("<span></span>").css(p).insertBefore(o._textareael);o._textareael.data(n,o);o._textareael.keyup();return o._textareael[0]},destroy:function(){e(window).undind(r);o._helperel.remove();o._textareael.resizable("destroy");o._textareael.remove();$this.removeData(n)},_textareascroll:function(e){if(!o._ishelperhidden){o._helperel.scrollTop($this.scrollTop());o._helperel.scrollLeft($this.scrollLeft())}},_textarearesize:function(e){if(!o._ishelperhidden){o._helperel.height($this.height());o._helperel.width($this.width())}},_textareaonchange:function(e){u._hidehelper.apply(this)},_hidehelper:function(){if(!o._ishelperhidden){o._helperel.hide();o._ishelperhidden=true}},_showhelper:function(e){if(o._ishelperhidden){o._helperel.show();o._ishelperhidden=false;$this.resizable("option","resize").apply($this.parent())}},highlight:function(e,t,n){if(t-e+1<=0){u._hidehelper.apply(this);return}var r=$this.val();var i=[];i[0]=r.substring(0,e);i[1]=r.substring(e,t+1);i[2]=r.substring(t+1,r.length);o._helperel.html(i[0]+'<span style="background: '+n+'">'+i[1]+"</span>"+i[2]);u._showhelper.apply(this);o._textareael.scroll();$this.blur()},highlight2areas:function(e,t,n,r,i,s){if(t-e+1<=0||i-r+1<=0){u._hidehelper.apply(this);return}var a=$this.val();var f=[];f[0]=a.substring(0,e);f[1]=a.substring(e,r);f[2]=a.substring(r,i+1);f[3]=a.substring(i+1,t+1);f[4]=a.substring(t+1,a.length);o._helperel.html(f[0]+'<span style="background: '+n+'">'+f[1]+'<span style="background: '+s+'">'+f[2]+"</span>"+f[3]+"</span>"+f[4]);u._showhelper.apply(this);o._textareael.scroll();$this.blur()}};if(u[i]){return this.each(function(){u[i].apply(e(this),Array.prototype.slice.call(s,1))})}else if(typeof i==="object"||!i){var a=[];this.each(function(){a.push(u.init.apply(e(this),arguments))});return e(a)}else{e.error("No method with name "+i+" for jQuery.textareaHighlighter")}}})(jQuery)